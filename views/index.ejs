<%- include("./partials/header.ejs") %>

        <% if(locals.users) {%>
            <form action="/user" method="POST">
                <% users.forEach(user => { %>
                    <button 
                            type="submit" 
                            class="search-by-id" 
                            name="user" 
                            value="<%= user.id %>" 
                            id="<%= user.id %>"
                    >
                        <%= user.nombre %>
                    </button>
                <%}); %>
            </form>
        <% } else { %>
            Prueba mas tarde.
        <% } %>
        <h1>
            <% if (locals.infoSaldo) { %>
                Saldo de <%= users[currentUser-1].nombre %>: $<%= infoSaldo %>
            <% } else { %>
                Selecciona a un usuario!
            <% } %>
        </h1>

        <div id="ingresos" hidden>
            <h2>
                Inserta tu ingreso!
            </h2>
            <form action="/ingresos" method="POST">
                <label for="tipoForm" hidden></label>
                <input type="text" name="tipo" id="tipoForm" value="Ingreso" hidden>
                <label for="cuentaForm">Cuenta </label>
                <select name="cuenta" id="cuentaForm">
                    <option value="" disabled selected hidden>Elegir cuenta</option>
                    <% cuentas.forEach(cuenta => { %>
                        <option value="<%= cuenta.cuenta_id %>"><%= cuenta.cuenta_nombre %></option>
                    <% }); %>
                </select>
                <label for="categoriaForm">Categoria </label>
                <input type="text" name="categoria" id="categoriaForm">
                <label for="importeForm">Importe </label>
                <input type="number" step="0.01" name="importe" id="importeForm">
                <label for="fechaForm">Fecha </label>
                <input type="date" name="fecha" id="fechaForm">
                <label for="observacionForm">Observacion </label>
                <input type="text" name="observacion" id="observacionForm">
                <input type="number" name="id_usuario" value="<%= currentUser %>" disabled>
                <input type="submit">
            </form>
        </div>

        <div id="egresos" hidden>
            <h2>
                Inserta tu egreso!
            </h2>
            <form action="/egresos" method="POST">
                <label for="tipoFormEgresos" hidden></label>
                <input type="text" name="tipo" id="tipoFormEgresos" value="Egreso" hidden>
                <label for="cuentaFormEgresos">Cuenta </label>
                <select name="cuenta" id="cuentaFormEgresos">
                    <option value="" disabled selected hidden>Elegir cuenta</option>
                    <% cuentas.forEach(cuenta => { %>
                        <option value="<%= cuenta.cuenta_id %>"><%= cuenta.cuenta_nombre %></option>
                    <% }); %>
                </select>
                <label for="categoriaFormEgresos">Categoria </label>
                <input type="text" name="categoria" id="categoriaFormEgresos">
                <label for="importeFormEgresos">Importe </label>
                <input type="number" step="0.01" name="importe" id="importeFormEgresos">
                <label for="fechaFormEgresos">Fecha </label>
                <input type="date" name="fecha" id="fechaFormEgresos">
                <label for="observacionFormEgresos">Observacion </label>
                <input type="text" name="observacion" id="observacionFormEgresos">
                <input type="number" name="id_usuario" value="<%= currentUser %>" disabled>
                <input type="submit">
            </form>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="/scripts/scripts.js" async defer></script>
    </body>
</html>